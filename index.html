<!DOCTYPE html>
<html>
<head>
  <title></title>
   <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
   integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
   crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <style type="text/css">
    #mapid {
        width: 100%;
        height: 95vh;
    }
    .leaflet-popup-content {
        font-size: 1.3em;
        width: 300px !important;
    }
   </style>
</head>
<body>
  <div id="mapid"></div>
  <script type="text/javascript">
    var gnctd_covid_facilities_data;
    $.getJSON('https://coronabeds.jantasamvad.org/covid-facilities.js?callback=?', function(data) {
        gnctd_covid_facilities_data = data;
    });
    
    var gnctd_covid_data;
    $.getJSON('https://coronabeds.jantasamvad.org/covid-info.js?callback=?', function(data) {
        gnctd_covid_data = data;
    });

    var missing_delhi_hsp_location = {
      "Dr Baba Saheb Ambedkar Hospital": "https://www.google.co.in/maps/place/Dr.+Baba+Saheb+Ambedkar+Hospital/@28.7146517,77.1111648,17z/data=!4m9!1m2!2m1!1sDr+Baba+Saheb+Ambedkar+Hospital!3m5!1s0x390d015044824d55:0xd681b31a1afbf378!8m2!3d28.7143841!4d77.1131819!15sCh9EciBCYWJhIFNhaGViIEFtYmVka2FyIEhvc3BpdGFsWkIKH2RyIGJhYmEgc2FoZWIgYW1iZWRrYXIgaG9zcGl0YWwiH2RyIGJhYmEgc2FoZWIgYW1iZWRrYXIgaG9zcGl0YWySARNnb3Zlcm5tZW50X2hvc3BpdGFsmgEjQ2haRFNVaE5NRzluUzBWSlEwRm5TVVJUY0daTWFGWlJFQUU?hl=en",
      "Janakpuri S.S. Hospital": "https://www.google.co.in/maps/place/Janakpuri+Super+Speciality+Hospital/@28.6212513,77.0197745,12z/data=!4m9!1m2!2m1!1sJanakpuri+S.S.+Hospital!3m5!1s0x390d04acd7303979:0x7f913a385ac2b53!8m2!3d28.6212513!4d77.0898123!15sChdKYW5ha3B1cmkgUy5TLiBIb3NwaXRhbFouChVqYW5ha3B1cmkgc3MgaG9zcGl0YWwiFWphbmFrcHVyaSBzcyBob3NwaXRhbJIBCGhvc3BpdGFsmgEkQ2hkRFNVaE5NRzluUzBWSlEwRm5TVU4zYlRSSGNUWkJSUkFC?hl=en",
      "Sardar Vallabh Bhai Patel Hospital": "https://www.google.co.in/maps/place/Sardar+Vallabhbhai+Patel+hospital/@28.6470346,77.1667664,17z/data=!3m1!4b1!4m5!3m4!1s0x390d02eb7a5879b3:0x8c90c30c3328ae12!8m2!3d28.6470299!4d77.1689551?hl=en",
      "Bhagwan Mahavir Hospital, Madhuban Chowk": "https://www.google.co.in/maps/place/Bhagwan+Mahavir+Hospital,+Rohini/@28.7061992,77.1268235,17z/data=!3m1!4b1!4m5!3m4!1s0x390d032f7e272ae9:0x981fa6046397d9b1!8m2!3d28.7061945!4d77.1290122?hl=en",
      "Nehru Homoeopatbhic medical College and Hospital": "https://www.google.co.in/maps/place/Nehru+Homoeopathic+Medical+College+and+Hospital/@28.5711468,77.2264861,17z/data=!3m1!4b1!4m5!3m4!1s0x390d1d95ab5aaaab:0x4cbf6ceb3bedf70d!8m2!3d28.5711421!4d77.2286748?hl=en",
      "Guru Gobind Singh Govt. Hospital": "https://www.google.co.in/maps/place/Guru+Gobind+Singh+Govt+Hospital/@28.6537477,77.1050243,17z/data=!3m1!4b1!4m5!3m4!1s0x390d037eae4d8d27:0xf723c56f00c23e5b!8m2!3d28.653743!4d77.107213?hl=en",
      "Central Jail Hospital, Tihar": "https://www.google.co.in/maps/place/Central+Jail+Hospital/@28.6248975,77.1086889,17z/data=!3m1!4b1!4m5!3m4!1s0x390d035a7ee8e86b:0x6ea287c5b1e9006!8m2!3d28.6248928!4d77.1108776?hl=en",
      "Rao Tula Ram Memorial Hospital": "https://www.google.co.in/maps/place/Rao+Tularam+Memorial+Hospital/@28.5947434,76.9119056,17z/data=!3m1!4b1!4m5!3m4!1s0x390d0dff43f819c3:0x3fcd5b0062d12bdc!8m2!3d28.5947387!4d76.9140943?hl=en",
      "Pt. Madan Mohan Malviya Hospital": "https://www.google.co.in/maps/place/Pt.+Madan+Mohan+Malaviya+Hospital/@28.5353307,77.2116057,17z/data=!3m1!4b1!4m5!3m4!1s0x390ce21ee9ccb17f:0x82c5c88ba2bb2f5a!8m2!3d28.535326!4d77.2137944?hl=en",
      "Maharishi Valmiki Hospital": "https://www.google.co.in/maps/place/Maharishi+Valmiki+Hospital/@28.6687316,77.1496439,12z/data=!4m9!1m2!2m1!1sMaharishi+Valmiki+Hospital!3m5!1s0x0:0x1fbf646aa0fc76b3!8m2!3d28.6687381!4d77.219678!15sChpNYWhhcmlzaGkgVmFsbWlraSBIb3NwaXRhbFo4ChptYWhhcmlzaGkgdmFsbWlraSBob3NwaXRhbCIabWFoYXJpc2hpIHZhbG1pa2kgaG9zcGl0YWySAQhob3NwaXRhbA?hl=en",
      "Burari Hospital": "https://www.google.co.in/maps/place/Burari+Hospital/@28.7610742,77.187685,17z/data=!3m1!4b1!4m5!3m4!1s0x390d002b9e093909:0x71ca1e4b709abf35!8m2!3d28.7610695!4d77.1898737?hl=en",
      "Maulana Mazad Institute of Dental Sciences": "https://www.google.co.in/maps/place/Maulana+Azad+Institute+Of+Dental+Sciences/@28.6370249,77.2349901,17z/data=!3m1!4b1!4m5!3m4!1s0x390cfd289df8a387:0x34ddca0591aff330!8m2!3d28.6370202!4d77.2371788?hl=en",
      "Dr. N.C. Joshi Mem. Hospital": "https://www.google.co.in/maps/place/Dr.+N.C.+Joshi+Memorial+Hospital/@28.6523623,77.196936,17z/data=!3m1!4b1!4m5!3m4!1s0x390cfd6390bbdcfd:0x5582e135f3a514ae!8m2!3d28.6523576!4d77.1991247?hl=en",
      "SDDMASC": "https://www.google.co.in/maps/place/Dada+Dev+Matri+Avum+Shishu+Chikitsalaya/@28.6101682,77.0805398,17z/data=!3m1!4b1!4m5!3m4!1s0x390d1bdd48f1936b:0x7ab8f78ae3bfa7e!8m2!3d28.6101635!4d77.0827285?hl=en",
      "B. R Sur Homoeopathic Medical College and Hospital": "https://www.google.co.in/maps/place/Dr.+B.+R.+Sur+Homoeopathic+Medical+College,+Hospital+and+Research+Centre/@28.5861992,77.1661261,17z/data=!3m1!4b1!4m5!3m4!1s0x390d1d1259921f8f:0x7cdeeed48d8d6a32!8m2!3d28.5861945!4d77.1683148?hl=en",
      "A&U Tibbia College": "https://www.google.co.in/maps/place/Ayurvedic+and+Unani+Tibbia+College/@28.6558434,77.192988,17z/data=!3m1!4b1!4m5!3m4!1s0x390cfd7d4819ac3d:0x975024bb1a04f5df!8m2!3d28.6558387!4d77.1951767?hl=en",
      "Bara Hindurao Hospital": "https://www.google.co.in/maps/place/Hindu+Rao+Hospital/@28.6755086,77.2085993,17z/data=!3m1!4b1!4m5!3m4!1s0x390cfd9bea362623:0x937371fce694df85!8m2!3d28.6755039!4d77.210788?hl=en",
      "Pushpawati Singhania Hospital, Saket": "https://www.google.co.in/maps/place/PSRI+Hospital/@28.5331357,77.2232518,17z/data=!3m1!4b1!4m5!3m4!1s0x390ce2276532a245:0xd0cd7116d6474347!8m2!3d28.533131!4d77.2254405?hl=en",
      "Vikas Hospital, Najafgarh": "https://www.google.co.in/maps/place/Vikas+Hospital+Private+Limited/@28.6493547,76.9351822,10.58z/data=!4m5!3m4!1s0x390d0fdb5b5b11c9:0x599102f63314afc9!8m2!3d28.6106995!4d76.980944?hl=en",
      "AAAGH ": "https://www.google.co.in/maps/place/Aruna+Asaf+Ali+Govt+Hospital/@28.6697803,77.2156618,17z/data=!3m1!4b1!4m5!3m4!1s0x390cfda00467e3c3:0x3a65ef26538eb119!8m2!3d28.6697756!4d77.2178505?hl=en",
      "Guru Nanak Eye Center": "https://www.google.co.in/maps/place/Guru+Nanak+Eye+Centre/@28.6379249,77.2301706,17z/data=!3m1!4b1!4m5!3m4!1s0x390cfd2506bf1ab5:0x9f4da20d2d9f545a!8m2!3d28.6381051!4d77.2321578?hl=en",
      "Babu Jagjivan Ram Memorial Hospital": "https://www.google.co.in/maps/place/Babu+Jagjivan+Ram+Memorial+Hospital/@28.7337451,77.1705735,17z/data=!3m1!4b1!4m5!3m4!1s0x390d01320bb7516d:0xdd143554d4265963!8m2!3d28.7337404!4d77.1727622?hl=en",
      "Choudhary Braham Prakash Ayurvedic CharakSansthan": "https://www.google.co.in/maps/place/Chaudhary+Brahm+Prakash+Ayurved+Charak+Sansthan/@28.5721899,76.9320045,17z/data=!4m9!1m2!2m1!1sChoudhary+Braham+Prakash+Ayurvedic+CharakSansthan!3m5!1s0x0:0x6867fe48a6315276!8m2!3d28.5721225!4d76.9334654!15sCjFDaG91ZGhhcnkgQnJhaGFtIFByYWthc2ggQXl1cnZlZGljIENoYXJha1NhbnN0aGFuWmYKMWNob3VkaGFyeSBicmFoYW0gcHJha2FzaCBheXVydmVkaWMgY2hhcmFrc2Fuc3RoYW4iMWNob3VkaGFyeSBicmFoYW0gcHJha2FzaCBheXVydmVkaWMgY2hhcmFrc2Fuc3RoYW6SAQhob3NwaXRhbA?hl=en",
      "Base Hospital Delhi Cantt": "https://www.google.co.in/maps/place/Base+Hospital+Delhi+Cantt/@28.6093493,77.1322822,17z/data=!4m9!1m2!2m1!1sBase+Hospital+Delhi+Cantt!3m5!1s0x0:0x296df759757ed242!8m2!3d28.611048!4d77.1322015!15sChlCYXNlIEhvc3BpdGFsIERlbGhpIENhbnR0WioKDWJhc2UgaG9zcGl0YWwiGWJhc2UgaG9zcGl0YWwgZGVsaGkgY2FudHSSARBnZW5lcmFsX2hvc3BpdGFs?hl=en",
      "Chacha nehru bal Chikitsalaya": "https://www.google.co.in/maps/place/Chacha+Nehru+Bal+Chikitsalaya/@28.6528049,77.2664733,17z/data=!3m1!4b1!4m5!3m4!1s0x390cfc95c4b97037:0x265d83e7df683dde!8m2!3d28.6528002!4d77.268662?hl=en",
      "Attar Sain Jain Eye Hospital": "https://www.google.co.in/maps/place/Attar+Sain+Jain+Hospital/@28.6821157,77.1480429,17z/data=!3m1!4b1!4m5!3m4!1s0x390d024b3eeb61e5:0x932d22d7054ad52d!8m2!3d28.682111!4d77.1502316?hl=en",
      "Nestiva Hospital": "https://www.google.com/maps/place/Nestiva+Hospital+Delhi/@28.5531823,77.1745499,15z/data=!4m2!3m1!1s0x0:0x1f8b3c62d704f4ef?sa=X&ved=2ahUKEwi9zsGH6JPwAhVlwTgGHcAyAs0Q_BIwGnoECCMQBQ"
    }

    setTimeout(function(){
        var mymap = L.map("mapid").setView([28.6469655, 77.0932634], 11);

        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoicHh0aHhrIiwiYSI6ImNrbnN0cHE2bTA3cGoycXBkajNuMnV5bTQifQ.si6acX_-tJGxBIiQWrHHCQ', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox/streets-v11',
            tileSize: 512,
            zoomOffset: -1,
            accessToken: 'pk.eyJ1IjoicHh0aHhrIiwiYSI6ImNrbnN0cHE2bTA3cGoycXBkajNuMnV5bTQifQ.si6acX_-tJGxBIiQWrHHCQ'
        }).addTo(mymap);

        for(var i in gnctd_covid_facilities_data) {
          try {
            if(gnctd_covid_facilities_data[i]["location"]) {
              if(gnctd_covid_facilities_data[i]["location"].split("/")[6].split(",").length == 3) {
                var coord = gnctd_covid_facilities_data[i]["location"].split("/")[6].replace("@", "").split(",");
              } else {
                var coord = gnctd_covid_facilities_data[i]["location"].split("/")[7].replace("@", "").split(",");
              }
            } else {
              if(i in missing_delhi_hsp_location) {
                if(missing_delhi_hsp_location[i].split("/")[6].split(",").length == 3) {
                  var coord = missing_delhi_hsp_location[i].split("/")[6].replace("@", "").split(",");
                } else {
                  var coord = missing_delhi_hsp_location[i].split("/")[7].replace("@", "").split(",");
                }
              }
            }
          } catch(err) {
            console.log(err);
            console.log(i);

            if(i in missing_delhi_hsp_location) {
              if(missing_delhi_hsp_location[i].split("/")[6].split(",").length == 3) {
                var coord = missing_delhi_hsp_location[i].split("/")[6].replace("@", "").split(",");
              } else {
                var coord = missing_delhi_hsp_location[i].split("/")[7].replace("@", "").split(",");
              }
            }
          }

          var hspInfo = "<b>" + i + "</b><br>";
          var contact_numbers = "Contact: " + gnctd_covid_facilities_data[i]["contact_numbers"].join(", ") + "<br>";
          var loc = "<a href=" + gnctd_covid_facilities_data[i]["location"] + " target='_blank'>Click for Google Maps</a><br>";
          var bedInfo = ""

          for(var j in gnctd_covid_data) {
            if(gnctd_covid_data[j][i]){
              var type = gnctd_covid_data[j][i]["type"] + "<br>";
              var last_updated_at = "Last Updated: " + gnctd_covid_data[j][i]["last_updated_at"] + "<br>";

              bedInfo = bedInfo + "<br><b>" + j.split("_").join(" ").replace(/(^|\s)\S/g, l => l).toUpperCase() + "</b><br>Total: " + gnctd_covid_data[j][i]["total"] + "<br>Vacant: " + gnctd_covid_data[j][i]["vacant"] + "<br>";
            }
          }

          var marker = L.marker([coord[0], coord[1]]).addTo(mymap).bindPopup(hspInfo + type + contact_numbers + loc + last_updated_at + bedInfo).openPopup();
        }
    }, 2000);
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YHLL5RH0L7"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-YHLL5RH0L7');
  </script>
</body>
</html>
